{% extends "base.html" %}

{% block content %}
<h2>Add Host / DNS Objects</h2>
<form method="post" class="mb-4">
    <div class="mb-3">
        <label for="ticket_ref" class="form-label">Ticket Ref</label>
        <input type="text" class="form-control" id="ticket_ref" name="ticket_ref" required>
    </div>

    <div class="mb-3">
        <label for="group_name" class="form-label">Group Name</label>
        <input type="text" class="form-control" id="group_name" name="group_name" required>
    </div>

    <div class="mb-3">
        <label for="input_data" class="form-label">
            Input Data (name and IP per line, or .domain.object.com)
        </label>
        <textarea class="form-control" id="input_data" name="input_data" required
            placeholder=".example.com or 192.168.1.10 or webserver1 10.0.0.5"></textarea>
        <div class="form-text">
            Examples:
            <ul>
                <li>Lines starting with '.' → DNS domain objects</li>
                <li>Single IP → auto-generated host name</li>
                <li>'name IP' → explicit host definition</li>
            </ul>
        </div>
    </div>

    <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="is_sub_domain" name="is_sub_domain">
        <label class="form-check-label" for="is_sub_domain">Is Sub-domain</label>
    </div>

    <button type="submit" class="btn btn-primary">Generate</button>
</form>

{% if output %}
    <h3>Generated API Commands</h3>
    <button class="btn btn-success mb-2" onclick="copyToClipboard()">Copy to Clipboard</button>
    <pre id="output">{{ output }}</pre>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
function copyToClipboard() {
    var copyText = document.getElementById("output");
    navigator.clipboard.writeText(copyText.textContent);
    alert("Copied to clipboard!");
}
</script>
{% endblock %}
